$(document).ready(function() {
    var Error_get_text = 'Unable to connect server';
    $(window).scroll(function(e) {
        var scrollTop = $(document).scrollTop();
        if (scrollTop > 10) {
            if ($("#return-btn").css('display') == 'none')
                $("#return-btn").stop(true, true).fadeIn(300)
        } else {
            $("#return-btn").stop(true, true).fadeOut(300)
        }
    });
    $(document).on('mousedown', '.project-item-modal-link', function() {
        var $item_section = $(this).closest('section');
        var id = $item_section.attr('data-item-id');
        $.get('/' + id + '.json').done(function(data) {
            var obj = data;//JSON.parse(data);
            var item_name = obj.name;
            var item_title = obj.title;
            var item_summary = obj.summary;
            var item_link = obj.link;
            var item_explain = obj.explain;
            var item_pics = [obj.pic, obj.pic2, obj.pic3];
            var slidenav_btn_container = "<a href='#' id='project-slidenav-left-btn' class='uk-slidenav uk-slidenav-previous icon-left-open'></a> " + "<a href='#' id='project-slidenav-right-btn' class='uk-slidenav uk-slidenav-next icon-right-open'></a>";
            var slideshow_img = '';
            var slideShow_count = '';
            for (var index in item_pics)
                if (item_pics[index]) {
                    slideShow_count++;
                    if (slideShow_count > 1)
                        slideshow_img += "<img style='display:none;' id='project-dialog-slideshow-img' src='" + item_pics[index] + "' >";
                    else
                        slideshow_img += "<img id='project-dialog-slideshow-img' src='" + item_pics[index] + "' >"
                }
            if (slideShow_count < 2)
                slidenav_btn_container = '';
            var item_link_container = (item_link) ? "<div id='project-dialog-link-container'><a class='btn-link' target='_blank' href='" + item_link + "'>See Live</a></div>" : '';
            $("#project-loading-dialog-container").css('display', 'none');
            $("#project-dialog-content-container").html("<div>" + "<div id='project-dialog-img-container' class='uk-slidenav-position' data-slideshow-count=''>" + slidenav_btn_container + "<figure id='project-dialog-slideshow-img-container' class='uk-thumbnail uk-thumbnail-expand project-dialog-slider-figure'>" + slideshow_img + "</figure>" + "</div>" + "<div class='project-item-title-container'>" + "<h3 class='category-item-title'>" + item_name + "</h3>" + "</div>" + "<div id='project-item-dialog-explain' >" + item_explain + "</div>" + item_link_container + "</div>")
        }).fail(function() {
            alert(Error_get_text)
        })
    });
    $('#project-item-dialog').on({
        'show.uk.modal': function() {},
        'hide.uk.modal': function() {
            $("#project-loading-dialog-container").css('display', 'block');
            $("#project-dialog-content-container").html('')
        }
    });
    $(document).on("click", "#project-slidenav-left-btn", function() {
        if (SliderFinishFlag)
            changeProjectSlider(false);
        return false
    });
    $(document).on("click", "#project-slidenav-right-btn", function() {
        if (SliderFinishFlag)
            changeProjectSlider(true);
        return false
    });
    var SliderFinishFlag = true;
    function changeProjectSlider(isForward) {
        SliderFinishFlag = false;
        var $slideShow_container = $("#project-dialog-slideshow-img-container");
        var current_position = 0;
        var next_position;
        var slider_size = 0;
        $slideShow_container.children('img').each(function() {
            slider_size++;
            if ($(this).css('display') != 'none') {
                current_position = $(this).index();
                $(this).fadeOut(400)
            }
        });
        if (isForward)
            next_position = (current_position + 1 > slider_size - 1) ? 0 : current_position + 1;
        else
            next_position = (current_position - 1 < 0) ? slider_size - 1 : current_position - 1;
        $slideShow_container.children('img').eq(next_position).addClass('ej-fade-slider');
        $slideShow_container.children('img').eq(next_position).fadeIn(400, function() {
            $(this).removeClass('ej-fade-slider');
            SliderFinishFlag = true
        })
    }
    document_ready();
});
$(window).bind("load", function() {
    setTimeout(function() {
        $("#loader").fadeOut(50)
    }, 10);
    setTimeout(function() {
        $(".ej-load").removeClass('ej-animation-load')
    }, 1)
});
var works = [];
var work_time = [];
function execute_action(func_action, time) {
    works.push(func_action);
    work_time.push(time)
}
function document_ready() {
    for (var num in works) {
        setTimeout(works[num], work_time[num])
    }
}
